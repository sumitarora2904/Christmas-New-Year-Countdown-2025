<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrasparq New Year Gala</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root{--gold:#D4AF37;--gold-bright:#FFD700;--gold-dim:#AA8C2C;--text-main:#fff}body{margin:0;background:radial-gradient(circle at 50% 50%,#1a1a1a 0%,#000 100%);color:var(--text-main);overflow:hidden;display:flex;flex-direction:column;height:100vh;font-family:'Roboto',sans-serif;cursor:pointer}canvas{position:fixed;top:0;left:0;pointer-events:none}#bubbles{z-index:1}#fireworks{z-index:3}#confetti{z-index:2}.container{margin:auto;padding:50px 70px;text-align:center;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);background:rgba(20,20,20,0.6);border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,0.5),inset 0 0 0 1px rgba(212,175,55,0.3);z-index:4;animation:slideUp 1.2s cubic-bezier(0.2,0.8,0.2,1);position:relative}.logo-container{position:fixed;top:20px;width:100%;text-align:center;z-index:10}.logo-container img{max-width:250px;filter:drop-shadow(0 0 5px var(--gold-dim))}h1{font-family:'Cinzel',serif;font-size:4.5rem;margin:0 0 40px 0;background:linear-gradient(to bottom,var(--gold-bright),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 10px rgba(212,175,55,0.2);letter-spacing:2px;position:relative;z-index:5}.sparkle{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:1}.sparkle div{position:absolute;width:2px;height:2px;background:#FFD700;border-radius:50%;opacity:0;animation:twinkle 2s infinite}.sub-title{font-size:1.2rem;color:#ccc;margin-bottom:30px;text-transform:uppercase;letter-spacing:4px}.countdown{display:flex;gap:30px;justify-content:center;flex-wrap:wrap}.time-box{background:rgba(0,0,0,0.4);border:1px solid rgba(212,175,55,0.4);padding:25px 35px;border-radius:12px;min-width:140px;position:relative;box-shadow:0 8px 32px 0 rgba(0,0,0,0.3);transition:transform .3s ease,border-color .3s ease}.time-box:hover{transform:translateY(-5px);border-color:var(--gold-bright);box-shadow:0 12px 40px rgba(212,175,55,0.15)}.number{font-family:'Cinzel',serif;font-size:5rem;font-weight:700;color:#fff;display:block;line-height:1}.label{font-size:.9rem;text-transform:uppercase;letter-spacing:3px;color:var(--gold);margin-top:10px}#celebrationMessage{display:none;font-family:'Cinzel',serif;font-size:4rem;background:linear-gradient(to right,#fff,var(--gold-bright),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200% auto;animation:shine 3s linear infinite;opacity:0;transition:opacity 2s ease}footer{position:fixed;bottom:15px;width:100%;text-align:center;font-size:.9rem;color:rgba(255,255,255,.4);z-index:10}
        @keyframes slideUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}@keyframes shine{to{background-position:200% center}}@keyframes twinkle{0%,100%{opacity:0}50%{opacity:1}}@media(max-width:768px){h1{font-size:2.5rem}.time-box{min-width:80px;padding:15px 10px}.number{font-size:2.5rem}.container{padding:30px 20px;width:90%}.logo-container img{max-width:180px;margin-top:10px}}
    </style>
</head>
<body>
    <div class="logo-container"><img src="https://www.terrasparq.com/terrasparq-logo-new.png" alt="Terrasparq" onerror="this.style.display='none'"></div>
    <canvas id="bubbles"></canvas>
    <canvas id="fireworks"></canvas>
    <canvas id="confetti"></canvas>
    
    <div class="container">
        <div class="sub-title" id="year-label">Counting Down To</div>
        <h1 id="title">2026<div class="sparkle"></div></h1>
        
        <div class="countdown">
            <div class="time-box"><div class="number" id="days">00</div><div class="label">Days</div></div>
            <div class="time-box"><div class="number" id="hours">00</div><div class="label">Hours</div></div>
            <div class="time-box"><div class="number" id="minutes">00</div><div class="label">Minutes</div></div>
            <div class="time-box"><div class="number" id="seconds">00</div><div class="label">Seconds</div></div>
        </div>
        
        <div id="celebrationMessage"></div>
    </div>

    <footer>Created with ‚ù§Ô∏è by Sumit Arora</footer>

    <audio id="bgMusic" loop src="https://cdn.pixabay.com/download/audio/2025/12/22/audio_b076fba58a.mp3?filename=new-year-countdown-455341.mp3"></audio>
    <audio id="tickingMusic" loop src="https://cdn.pixabay.com/download/audio/2025/06/10/audio_63b6707ae6.mp3?filename=slow-cinematic-clock-ticking-357979.mp3" preload="auto"></audio>
    <audio id="fireworksMusic" src="https://cdn.pixabay.com/download/audio/2022/03/09/audio_a0da3af080.mp3?filename=new-year-fireworks-24781.mp3" preload="auto"></audio>

    <script>
        // --- CONFIGURATION ---
        // Changed to 'let' so it can be modified via console for testing
        let targetDate = new Date("December 31, 2025 23:59:59").getTime();
        
        // --- AUDIO SYSTEM ---
        const sounds = {
            bg: document.getElementById("bgMusic"),
            ticking: document.getElementById("tickingMusic"),
            fireworks: document.getElementById("fireworksMusic")
        };
        
        let audioEnabled = false;
        let tickingMode = false;

        // Initialize Audio on First User Interaction
        function enableAudio() {
            if (audioEnabled) return;
            audioEnabled = true;
            console.log("Audio Enabled by user interaction");
            
            // Play and immediately pause to unlock audio on iOS/Chrome
            Object.values(sounds).forEach(s => {
                s.play().then(() => {
                    if(s !== sounds.bg) s.pause(); 
                    if(s === sounds.ticking) s.currentTime = 0;
                }).catch(e => console.log("Autoplay prevented:", e));
            });

            // Start correct track based on current time
            checkAudioState(targetDate - new Date().getTime());
        }

        function checkAudioState(diff) {
            if(!audioEnabled) return;

            // LESS THAN 1 MINUTE LEFT (and positive)
            if (diff > 0 && diff < 60000 && !tickingMode) {
                tickingMode = true;
                sounds.bg.pause();
                sounds.ticking.volume = 1.0;
                sounds.ticking.play().catch(e=>console.log(e));
            } 
            // MORE THAN 1 MINUTE LEFT
            else if (diff >= 60000 && sounds.bg.paused) {
                sounds.bg.play().catch(e=>console.log(e));
            }
        }

        // --- VISUALS & LOGIC ---
        let bubbles=[], fireworks=[], confetti=[], celebrating=false, fwInterval=null, isMobile=window.innerWidth<768;
        const bubbleCanvas=document.getElementById("bubbles"), fwCanvas=document.getElementById("fireworks"), confCanvas=document.getElementById("confetti");
        const bubbleCtx=bubbleCanvas.getContext("2d"), fwCtx=fwCanvas.getContext("2d"), confCtx=confCanvas.getContext("2d");

        function resizeAll(){ [bubbleCanvas,fwCanvas,confCanvas].forEach(c=>{c.width=window.innerWidth; c.height=window.innerHeight}) }

        function initBubbles(){
            bubbles=[];
            for(let i=0;i<(isMobile?80:150);i++) bubbles.push({x:Math.random()*window.innerWidth, y:Math.random()*window.innerHeight, r:Math.random()*3+.5, v:Math.random()*.5+.2, o:Math.random()*.5+.1});
        }

        function initConfetti(){
            confetti=[];
            for(let i=0;i<(isMobile?80:150);i++) confetti.push({x:Math.random()*window.innerWidth, y:Math.random()*-window.innerHeight, size:Math.random()*5+3, color:Math.random()>.5?'#D4AF37':'#C0C0C0', speed:Math.random()*2+1, angle:Math.random()*360, spin:Math.random()*.1-.05});
        }

        function startFireworks(){
            if(fwInterval)return;
            fwInterval=setInterval(()=>{
                const colors=[`hsl(45,100%,50%)`,`hsl(0,0%,100%)`,`hsl(45,60%,80%)`];
                fireworks.push({x:Math.random()*window.innerWidth, y:window.innerHeight, targetY:window.innerHeight*.2+Math.random()*(window.innerHeight*.5), speed:Math.random()*3+4, color:colors[Math.floor(Math.random()*colors.length)], exploded:!1, particles:[]});
            },800);
        }

        function createSparkles(){
            const container=document.querySelector(".sparkle");
            container.innerHTML='';
            for(let i=0;i<(isMobile?20:50);i++){
                const s=document.createElement("div");
                s.style.top=Math.random()*100+"%"; s.style.left=Math.random()*100+"%"; s.style.animationDelay=Math.random()*2+"s";
                s.style.width=s.style.height=Math.random()*2+1+"px";
                container.appendChild(s);
            }
        }

        function animate(){
            bubbleCtx.clearRect(0,0,window.innerWidth,window.innerHeight);
            bubbles.forEach(b=>{
                bubbleCtx.beginPath(); bubbleCtx.arc(b.x,b.y,b.r,0,2*Math.PI); bubbleCtx.fillStyle="#D4AF37"; bubbleCtx.globalAlpha=b.o; bubbleCtx.fill();
                b.y-=b.v; if(b.y<0){b.y=window.innerHeight; b.x=Math.random()*window.innerWidth}
            });

            fwCtx.clearRect(0,0,window.innerWidth,window.innerHeight);
            fireworks.forEach((fw,i)=>{
                if(!fw.exploded){
                    fwCtx.fillStyle=fw.color; fwCtx.beginPath(); fwCtx.arc(fw.x,fw.y,3,0,2*Math.PI); fwCtx.fill();
                    fw.y-=fw.speed;
                    if(fw.y<=fw.targetY){
                        fw.exploded=!0;
                        Array.from({length:isMobile?30:60}).forEach(()=>{
                            const angle=Math.random()*2*Math.PI, speed=Math.random()*4+1;
                            fw.particles.push({x:fw.x, y:fw.y, vx:Math.cos(angle)*speed, vy:Math.sin(angle)*speed, alpha:1, decay:Math.random()*.015+.005});
                        });
                    }
                }else{
                    fw.particles.forEach((p,pi)=>{
                        fwCtx.fillStyle=`rgba(255,215,0,${p.alpha})`; fwCtx.beginPath(); fwCtx.arc(p.x,p.y,2,0,2*Math.PI); fwCtx.fill();
                        p.x+=p.vx; p.y+=p.vy+.05; p.alpha-=p.decay;
                        if(p.alpha<=0) fw.particles.splice(pi,1);
                    });
                    if(fw.particles.length===0) fireworks.splice(i,1);
                }
            });

            confCtx.clearRect(0,0,window.innerWidth,window.innerHeight);
            confetti.forEach(c=>{
                confCtx.save(); confCtx.translate(c.x,c.y); confCtx.rotate(c.angle); confCtx.fillStyle=c.color; confCtx.fillRect(-c.size/2,-c.size/2,c.size,c.size); confCtx.restore();
                c.y+=c.speed; c.angle+=c.spin;
                if(c.y>window.innerHeight){c.y=-c.size; c.x=Math.random()*window.innerWidth}
            });
            requestAnimationFrame(animate);
        }

        function updateCountdown(){
            const now=(new Date).getTime();
            const diff=targetDate-now;
            const title=document.getElementById("title");
            const label=document.getElementById("year-label");
            const msg=document.getElementById("celebrationMessage");
            const cdBox=document.querySelector(".countdown");

            // Audio Logic Sync
            checkAudioState(diff);

            if(diff>0){
                const d=Math.floor(diff/(1e3*60*60*24));
                const h=Math.floor(diff%(1e3*60*60*24)/(1e3*60*60));
                const m=Math.floor(diff%(1e3*60*60)/(1e3*60));
                const s=Math.floor(diff%(1e3*60)/1e3);
                document.getElementById("days").textContent=String(d).padStart(2,"0");
                document.getElementById("hours").textContent=String(h).padStart(2,"0");
                document.getElementById("minutes").textContent=String(m).padStart(2,"0");
                document.getElementById("seconds").textContent=String(s).padStart(2,"0");
            } else if(!celebrating) {
                celebrating=true;
                
                // Audio Switch for Celebration
                if(audioEnabled){
                    sounds.bg.pause();
                    sounds.ticking.pause();
                    sounds.fireworks.volume = 1.0;
                    sounds.fireworks.play().catch(e=>console.log("Fireworks audio failed:",e));
                }

                cdBox.style.display="none";
                title.style.display="none";
                label.style.display="none";
                msg.style.display="block";
                msg.style.opacity=0;
                msg.innerHTML="üéâ Happy New Year! üéâ";
                setTimeout(()=>{msg.style.transition="opacity 2s ease";msg.style.opacity=1},50);
                startFireworks();
                initConfetti();
            }
        }

        window.addEventListener("resize",resizeAll);
        document.addEventListener("click", enableAudio);
        document.addEventListener("DOMContentLoaded",()=>{
            resizeAll(); initBubbles(); initConfetti(); createSparkles();
            animate(); updateCountdown(); setInterval(updateCountdown,1e3);
        });
    </script>
</body>
</html>
